{% extends 'base.html' %}

{% block content %}

    {% for message in get_flashed_messages() %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}

    {% if current_user.is_authenticated %}
    <div>
        <br>
        <form method="POST" class="blue-text">
            {{ form.hidden_tag() }}
            <div class="row">
                <!-- Common Name Label -->
                <div class="col-3 text-end" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="(Required) Enter the common name of your plant.">
                    <strong>* {{ form.common_name.label(class="form-label") ~ ':'}}</strong>
                </div>
                <!-- Common Name Field -->
                <div class="col-3">
                    {{ form.common_name(class="form-control")}}
                </div>
                <!-- Latin Name Label -->
                <div class="col-2 text-end" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="(Optional) Enter the latin name of your plant">
                    <strong>{{ form.latin_name.label(class="form-label") ~ ':'}}</strong>
                </div>
                <!-- Latin Name Label -->
                <div class="col-3">
                    {{ form.latin_name(class="form-control") }}
                </div>
                <!-- Go Back Button -->
                <div class="col-1">
                    <a href="{{ url_for('plants') }}"><img src="{{ url_for('static', filename='images/back.webp') }}" alt="Go Back" class="back-button"></a>
                </div>
            </div>
            <br>
            <div class="row">
                <!-- Water Interval Label -->
                <div class="col-3 text-end" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="(Required) How many days should there be between watering?">
                    <strong>* {{ form.water_interval.label(class="form-label") ~ ':'}}</strong>
                </div>
                <!-- Water Interval Field -->
                <div class="col-3">
                    {{ form.water_interval(class="form-control") }}
                </div>
                <!-- Last Watered Label -->
                <div class="col-2 text-end text-nowrap" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="(Required) When did you last water this plant?">
                    <strong>* {{ form.last_watered_date.label(class="form-label") ~ ':'}}</strong>
                </div>
                <!-- Last Watered Field -->
                <div class="col-3">
                    {{ form.last_watered_date(class="form-control") }}
                </div>
                <!-- Submit Button -->
                <div class="col-1">
                    <button type=submit><img src="{{ url_for('static', filename='images/save.webp') }}" alt="Save" class="save-button"></button>  
                </div>
            </div>
            <br>
            <div class="row">
                <!-- Pic Url Label -->
                <div class="col-3 text-end" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="(Optional) Upload your photo to a hosting platform such as Flikr, and then paste the image URL here">
                    <strong>{{ form.pic_url.label(class="form-label") ~ ':'}}</strong>
                </div>
                <div class="col-8">
                    {{ form.pic_url(class="form-control") }}
                </div>
            </div>
            <br>
            <!-- Notes Label -->
            <div class="row">
                <div class="col-6 text-start" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="(Optional) Write notes about your plants here. E.g. how to double check that it needs watering, or when you last gave it fertiliser">
                    <strong>{{ form.notes.label(class="form-label") ~ ':'}}</strong>
                </div>
                <div class="col-6 text-end">
                    <small>* Required</small>
                </div>
            </div>
            <!-- Notes Field -->
            <div class="row">
                <div class="col-12">
                    {{ form.notes(class="form-control", rows="5") }}
                </div>
            </div>     
            <br>
        </form>
        {{ ckeditor.load() }}
        {{ ckeditor.config(name='notes') }}
    </div>
    {% else  %}
        <h2>Must be logged in</h2>
        <p>Sorry, you must be logged in to access this page</p>
        <a href="{{ url_for('login')}}">Login Here</a>
    {% endif %}

{% endblock %}